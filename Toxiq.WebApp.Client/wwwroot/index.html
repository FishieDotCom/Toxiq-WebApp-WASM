<!-- Toxiq.WebApp.Client/wwwroot/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <base href="/" />
    <link href="css/toxiq-styles.css" rel="stylesheet" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link href="Toxiq.WebApp.Client.styles.css" rel="stylesheet" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

    <!-- Progressive Web App -->
    <meta name="theme-color" content="#0e0e0e" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <title>Toxiq - Where Cool Kids Hangout</title>
</head>

<body>
    <div id="app">
        <div style="
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #0e0e0e;
            color: white;
            font-family: 'Roboto', sans-serif;
            gap: 20px;
        ">
            <div style="
                width: 80px;
                height: 80px;
                background: linear-gradient(135deg, #d600aa, #190649);
                border-radius: 16px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 32px;
                font-weight: 600;
                color: white;
                animation: pulse 2s ease-in-out infinite alternate;
            ">
                T
            </div>
            <div style="text-align: center;">
                <h2 style="margin: 0; font-size: 24px; font-weight: 600;">Loading Toxiq</h2>
                <p style="margin: 8px 0 0 0; color: #acacac; font-size: 14px;">Where Cool Kids Hangout</p>
            </div>
            <div style="
                width: 40px;
                height: 40px;
                border: 3px solid #404040;
                border-top: 3px solid #d600aa;
                border-radius: 50%;
                animation: spin 1s linear infinite;
            "></div>
        </div>

        <style>
            @keyframes spin {
                0% {
                    transform: rotate(0deg);
                }

                100% {
                    transform: rotate(360deg);
                }
            }

            @keyframes pulse {
                0% {
                    transform: scale(1);
                }

                100% {
                    transform: scale(1.05);
                }
            }
        </style>
    </div>

    <div id="blazor-error-ui" style="
        background: #b32121;
        color: white;
        padding: 1rem;
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        display: none;
        text-align: center;
    ">
        An unhandled error has occurred.
        <a href="" class="reload" style="color: white; margin-left: 1rem;">Reload</a>
        <a class="dismiss" style="color: white; margin-left: 1rem; cursor: pointer;">ðŸ—™</a>
    </div>

    <script src="_framework/blazor.webassembly.js"></script>
    <script src="js/feed-helpers.js"></script>
    <script>
        // Platform detection for responsive behavior
        window.toxiqPlatform = {
            detect: function () {
                return {
                    isTelegramMiniApp: window.Telegram && window.Telegram.WebApp,
                    isDesktop: window.innerWidth >= 1024,
                    isMobile: window.innerWidth < 768,
                    userAgent: navigator.userAgent,
                    viewportWidth: window.innerWidth,
                    viewportHeight: window.innerHeight,
                    hasTouch: 'ontouchstart' in window || navigator.maxTouchPoints > 0
                };
            }
        };

        // Performance optimization: preload critical resources
        window.addEventListener('load', function () {
            // Remove loading indicator after app loads
            setTimeout(() => {
                const loadingDiv = document.querySelector('#app > div:first-child');
                if (loadingDiv && loadingDiv.style.display !== 'none') {
                    loadingDiv.style.opacity = '0';
                    loadingDiv.style.transition = 'opacity 0.3s ease';
                    setTimeout(() => loadingDiv.remove(), 300);
                }
            }, 1000);
        });

        // Handle error UI
        document.addEventListener('DOMContentLoaded', function () {
            const errorUI = document.getElementById('blazor-error-ui');
            const dismissBtn = errorUI.querySelector('.dismiss');

            dismissBtn?.addEventListener('click', function () {
                errorUI.style.display = 'none';
            });
        });
    </script>
</body>
</html>